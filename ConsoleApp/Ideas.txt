Things left to do

- Make more generic
- Refactor to something nicer
- Refactor out base class